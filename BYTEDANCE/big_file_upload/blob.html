<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Document</title>
</head>

<body>
  <img src="" alt="" id="pic" width="300">
  <input type="file" id="file">
  <script>
    // es6 file对象 Blob上传
    // es5 文件上传到服务器后，静态服务器提供一个远程地址，我们才能看到上传的图片
    // es6 在客户端操作文件 file对象，blob协议在本地就把图片显示出来，配合上传进度，更好的用户体验
    document
      .getElementById('file')
      .addEventListener('change', (e) => {
        const file = e.target.files[0];
        // console.log(Object.prototype.toString.call(file));
        const URL = window.URL;
        const objectUrl = URL.createObjectURL(file);
        console.log(objectUrl);
        const pic = document.getElementById('pic');
        pic.src=objectUrl;
        pic.onload =function(){
          URL.revokeObjectURL(objectUrl);
          console.log('释放对象');
          
        }
      })
  </script>
</body>

</html>